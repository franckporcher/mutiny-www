#!/bin/bash
#
# DEFINES - global definitions
#
# PROJECT: MUTINY Tahiti's websites
#
# Copyright (C) 1995-2015 - Franck Porcher, Ph.D 
# www.franckys.com
# Tous droits réservés
# All rights reserved


#----------------------------------------
# APPLICATION MODULES
#----------------------------------------
# Modules Arborescence
declare -A MODULES
MODULES[root]='mutiny'
MODULES[mutiny]='wordpress store cgm'

#----------------------------------------
# WEB SERVER CREDENTIALS
#----------------------------------------
WWWUID='www-data'
WWWGID='www-data'

#----------------------------------------
# GIT STUFF 
#----------------------------------------
#GIT_URL="ssh://git@github.com/franckporcher"
GIT_URL="https://git@github.com/franckporcher"

# Git Modules
declare -A INITIAL_RELEASE
declare -A CURRENT_RELEASE

# moduleName > ReposName:BranchName:InstallDir
# InstallDir shoudl be either an absolute path,
# or a relative path from <topinstalldir>/libexec
# (from where all the scripts run)
INITIAL_RELEASE[mutiny]="    mutiny-www      stable-v1.0            /srv/www/mutiny/current"
INITIAL_RELEASE[wordpress]=" mutiny-www-wp   init-4.1.1-v1.0        /srv/www/mutiny/current"
INITIAL_RELEASE[store]="     mutiny-www-ps   init-1.6.0.14-v1.0     /srv/www/mutiny/current/store"
INITIAL_RELEASE[cgm]="       mutiny-www-cgm  stable-v1.0            /srv/www/mutiny/current/cgm"

CURRENT_RELEASE[mutiny]="    mutiny-www      stable-v1.0            /srv/www/mutiny/current"
CURRENT_RELEASE[wordpress]=" mutiny-www-wp   init-4.1.1-v1.0        /srv/www/mutiny/current"
CURRENT_RELEASE[store]="     mutiny-www-ps   init-1.6.0.14-v1.0     /srv/www/mutiny/current/store"
CURRENT_RELEASE[cgm]="       mutiny-www-cgm  stable-v1.0            /srv/www/mutiny/current/cgm"


#----------------------------------------
# MYSQL DB CREDENTIALS
#----------------------------------------
#SQL_DBSERVER=devsql.mutinytahiti.com
eval "SQL_DBSERVER=$(grep -m 1 -E 'SetEnv.+DBSERVER' /etc/apache2/sites-enabled/mutiny.conf | awk '{print $3}')"
[ -z "${SQL_DBSERVER}" ]  && SQL_DBSERVER="devsql.mutinytahiti.com"

SQL_ROOT=root
SQL_DBADMIN='mutiny_db_admin'
SQL_DBADMIN_PWD='AmantesIslaUnidos'

SQL_PSDB=psmutiny
SQL_WPDB=wpmutiny


#----------------------------------------
# INSTALLATION HELPERS
#----------------------------------------
BOOTSTRAP_MODULE='bootstrap.sh'
INSTALL_MODULE='install_module.sh'
UPDATE_MODULE='update_module.sh'

